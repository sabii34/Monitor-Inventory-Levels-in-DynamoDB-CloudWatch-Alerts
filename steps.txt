PROJECT: Monitor Inventory Levels in DynamoDB + CloudWatch Alerts (FROM SCRATCH)

Goal: Automatically check product stock â†’ send alert when stock is low.

âœ… STEP 1 â€” Create a DynamoDB Table
Go to:

AWS Console â†’ DynamoDB â†’ Create Table

Table Details:
Field	Value
Table Name	Inventory
Partition Key	ProductID (String)
Sort Key	Not needed
Add Sample Items:

Go to Explore Table Items â†’ Create Item and add:

{
  "ProductID": "101",
  "ProductName": "iPhone 14",
  "Stock": 5
}


Another:

{
  "ProductID": "102",
  "ProductName": "Samsung S22",
  "Stock": 30
}


Another:

{
  "ProductID": "103",
  "ProductName": "AirPods Pro",
  "Stock": 7
}


These values will be used by Lambda.

âœ… STEP 2 â€” Create an SNS Topic for Alerts
Go to:

AWS Console â†’ SNS â†’ Create Topic

Topic Type: Standard

Name: LowStockAlerts

Then create a subscription:

Protocol: Email

Endpoint: your email (Gmail, etc.)

You will receive a confirmation email â†’ Click Confirm Subscription.

Now SNS is ready to send alerts.

âœ… STEP 3 â€” Create IAM Role for Lambda

Go to:
AWS Console â†’ IAM â†’ Roles â†’ Create Role

Trusted entity: AWS Service

Service: Lambda

Attach permissions:

âœ” AmazonDynamoDBReadOnlyAccess
âœ” CloudWatchPutMetricData
âœ” AmazonSNSFullAccess
âœ” AWSLambdaBasicExecutionRole

Name the role:
âž¡ Lambda_DynamoDB_StockMonitor_Role

âœ… STEP 4 â€” Create Lambda Function (Reads DynamoDB + Sends Metrics + Sends Alerts)

Go to:
Lambda â†’ Create Function

Runtime: Node.js 18+ (or Python if you want later)

Name: CheckStockLambda

Execution Role: select the role from Step 3

Replace code with this:
const AWS = require("aws-sdk");
const dynamodb = new AWS.DynamoDB.DocumentClient();
const cloudwatch = new AWS.CloudWatch();
const sns = new AWS.SNS();

exports.handler = async () => {
    const params = { TableName: "Inventory" };

    const data = await dynamodb.scan(params).promise();

    for (let item of data.Items) {
        const stock = item.Stock;

        // 1. Publish custom metric to CloudWatch
        await cloudwatch.putMetricData({
            Namespace: "InventoryMonitoring",
            MetricData: [
                {
                    MetricName: "StockLevel",
                    Dimensions: [{ Name: "ProductID", Value: item.ProductID }],
                    Value: stock,
                    Unit: "Count"
                }
            ]
        }).promise();

        // 2. If stock is low, send SNS alert
        if (stock < 10) {
            const message = `
Low Stock Alert!
Product: ${item.ProductName}
Stock Left: ${stock}
Product ID: ${item.ProductID}
            `;

            await sns.publish({
                TopicArn: "arn:aws:sns:your-region:your-account-id:LowStockAlerts",
                Message: message,
                Subject: "âš ï¸ LOW STOCK ALERT"
            }).promise();
        }
    }

    return "Stock check complete";
};

ðŸ”§ Replace:

your-region and your-account-id in TopicArn.

You can find it in SNS â†’ Your Topic â†’ ARN.

âœ… STEP 5 â€” Create Custom CloudWatch Metric (Automatic)

The Lambda function automatically sends metrics.

To view:

Go to CloudWatch â†’ Metrics

Select InventoryMonitoring (Namespace)

Metric: StockLevel

You will see metrics per product.

âœ… STEP 6 â€” Create a CloudWatch Alarm (Trigger When Stock Low)

Go to:
CloudWatch â†’ Alarms â†’ Create Alarm

Configure:

Select metric
â†’ InventoryMonitoring â†’ StockLevel â†’ Per ProductID

Choose a specific product for demonstration (you can repeat for others).

Set condition:

Threshold type: Static

Whenever StockLevel is < 10

Period: 1 minute

Alarm actions:

Choose SNS topic:
âž¡ LowStockAlerts

Name:
âž¡ LowStockAlarm_iPhone14

âœ… STEP 7 â€” Schedule Lambda to Run Automatically

Go to:
EventBridge â†’ Create Rule

Name: CheckStockEvery5Minutes

Schedule expression:

rate(5 minutes)


Target:
âœ” Lambda â†’ CheckStockLambda

Now Lambda checks stock every 5 minutes.

ðŸŽ¯ And That's It â€” Your Project Is Complete

Your system will now:

âœ” Read DynamoDB inventory
âœ” Push metrics to CloudWatch
âœ” Check if stock is < 10
âœ” Trigger CloudWatch alarm
âœ” Send alert through SNS email
âœ” Auto-run every 5 minutes

ðŸ§± Final Architecture Diagram (Explained)
